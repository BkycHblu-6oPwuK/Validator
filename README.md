# Валидатор для массива

Эта библиотека предоставляет собой простую реализацию валидатора для массивов с различными типами значений.

## Как использовать

Для использования валидатора создайте класс, наследующийся от `Validator\BaseValidator`, и реализуйте метод `rules`, описывающий правила валидации. Каждое правило разделяется символом '|'.

```php
protected function rules() : array
{
    return [
        'name' => 'required|string|min:2|max:30',
        'email' => 'nullable',
        'tesr' => 'nullable|integer|min:4',
    ];
}
```

## Пользовательские сообщения об ошибках

Вы также можете создать пользовательские сообщения об ошибках для каждого правила с помощью метода `messages`:

```php
protected function messages(): array
{
    return [
        'name.required' => 'Имя обязательный параметр',
        'name.min' => 'Имя должно быть не короче 2 символов',
        'email.required' => 'Email обязательный параметр',
        'email.email' => 'Email должен быть валидным',
    ];
}
```

## Стандартные правила

- `array` - Проверяет, является ли значение массивом.
- `boolean` - Проверяет, является ли значение логическим.
- `email` - Проверяет, является ли значение валидным email.
- `float` - Проверяет, является ли значение числом с плавающей точкой (целое число вернет false).
- `in` - Ищет значение в массиве (если значение не массив, то вернет false).
- `integer` - Проверяет, является ли значение целым числом (числовая строка или число с плавающей точкой вернут false).
- `max:{param}` - Проверяет, является ли длина значения больше или равна переданному параметру.
- `min:{param}` - Проверяет, является ли длина значения меньше или равна переданному параметру.
- `nullable` - Значение может быть необязательным.
- `numeric` - Проверяет, является ли значение числом или числовой строкой.
- `required` - Значение обязательно.
- `string` - Проверяет, является ли значение строкой (пустая строка также вернет true).

## Пользовательские правила

Вы можете добавить свои правила с помощью метода `rulesBuilder`, который должен вернуть объект класса `Validator\RulesBuilder`. Используйте метод `addRule` для добавления объектов `RuleDTO`.

```php
protected function rulesBuilder() : ?RulesBuilder
{
    $custom = new RuleDTO(CustomRule::class, 'custom');
    return (new RulesBuilder())->addRule($custom);
}
```

Имя пользовательского правила должно быть уникальным и не совпадать со стандартными правилами. Теперь имя `custom` можно использовать при формировании правила в методе `rules`. Если передаете параметр через двоеточие, то самостоятельно реализуйте конструктор в своем классе правила, значение будет передано.

## Пример использования

Для валидации массива создайте экземпляр класса валидатора. Конструктор принимает массив, значения которого будут проверяться.

```php
$validator = new CreateValidator([
    'name' => 'имя',
    'email' => 'email@email.com',
    'age' => 33,
]);
```

Для валидации используйте метод `validate`, который возвращает логическое значение:

```php
$validator->validate();
```

Для получения сообщений об ошибках используйте метод `errors`:

```php
$validator->errors();
```

Для получения массива отвалидированных значений используйте метод `validated`:

```php
$validator->validated();
```